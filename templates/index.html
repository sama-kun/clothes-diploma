{% extends 'base.html' %}

{% load static %}
{% load humanize %}

{% block title %}
Palette Style
{% endblock %}

{% block body %}

<style>
    .video-container {
        position: relative;
        text-align: center;
        /* color: white;  */
        /* margin-top: 20px; */
    }

    .video-container video {
        width: 100%;
        height: auto;
    }

    .video-container .video-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
    }

    .video-container .video-text h1 {
        font-size: 3rem;
        font-weight: bold;
    }

    .video-container .video-text p {
        font-size: 1.5rem;
    }

.row-card {
    display: flex;
    flex-wrap: wrap;
    gap: 20px; /* Расстояние между карточками */
}

.col-lg-3,
.col-md-6 {
    flex: 1 1 calc(25% - 20px); /* Занимает 25% ширины с учетом отступов */
    max-width: calc(25% - 20px);
}

.custom-card {
    position: relative;
    overflow: hidden;
    border: 1px solid transparent; /* Без бордера по умолчанию */
    transition: transform 0.3s ease, border 0.3s ease, height 0.3s ease;
    width: auto;
    height: auto;
    display: flex;
    flex-direction: column;
}

.custom-card:hover {
    transform: scale(1.05); /* Увеличение карточки при ховере */
    z-index: 1; /* Поверх других карточек */
    border: 1px solid black; /* Черный бордер при ховере */
    position:absolute;
}

/* Главное изображение */
.box-img-hover {
    position: relative;
    overflow: hidden;
    height: auto; /* Высота блока главного изображения */
}

.main-img {
    width: 100%;
    height: auto;
    object-fit: contain; /* Заполнить блок полностью, сохраняя пропорции */
    transition: transform 0.3s ease;
}

.custom-card:hover .main-img {
    transform: scale(1.1); /* Увеличение основного фото при ховере */
}

/* Дополнительные изображения */
.additional-images {
    display: flex;
    justify-content: left;
    gap: 5px;
    height: 0; /* Скрытые дополнительные изображения */
    opacity: 0; /* Скрытые до ховера */
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease, height 0.3s ease;
}

.custom-card:hover .additional-images {
    opacity: 1; /* Показать дополнительные фото при ховере */
    visibility: visible;
    height: auto; /* Разрешить место для дополнительных фото */
}

.additional-img {
    width: 30%;
    height: auto;
    object-fit: cover; /* Масштабирование миниатюр */
    transition: transform 0.3s ease;
}

.additional-img:hover {
    transform: scale(1.1); /* Увеличение миниатюр при ховере */
}

/* Текстовая информация */
.product-info {
    padding: 10px 0;
    text-align: left;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.product-info h4,
.product-info h5,
.product-info p {
    margin: 5px 0;
}

.product-info h4 a {
    text-decoration: none;
    color: black;
}

.product-info h4 a:hover {
    text-decoration: underline;
}

.btn.cart {
    background-color: #000;
    border: none;
    padding: 8px 12px;
    border-radius: 4px;
}

.btn.cart:hover {
    background-color: #444;
}
</style>

{% if messages %}
    {% for message in messages %}
        <div class="alert alert-primary alert-dismissible fade show mb-0" role="alert">
            {{message}}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    {% endfor %}
{% endif %}
<div id="slides-shop" class="cover-slides" style="height: 100vh; overflow: hidden;">
    <ul class="slides-container" style="list-style: none; padding: 0; margin: 0;">
        <!-- Первый слайд -->
        <li class="text-left" style="height: 100vh; position: relative;">
            <div class="video-container" style="position: relative; height: 100%; width: 100%;">
                <!-- Видео -->
                <video autoplay muted loop style="width: 100%; height: 100%; object-fit: cover;">
                    <source src="{% static 'needs/preview_video.mp4' %}" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
                <!-- Текст -->
                <div class="video-text" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white;">
                    <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1 class="m-b-20"><strong>Join DesignerMarket: Discover a World of Unique Fashion!</strong></h1>
                    <p class="m-b-40">Explore exclusive collections from independent designers around the globe on our platform. Unite with talent, support creativity, and buy unique garments directly from the creators.</p>
                </div>
            </div>
        </div>
                    <a href="/products" class="btn hvr-hover" 
                        style="margin-top: 20px; color: white; background-color: rgba(0, 0, 0, 0.5); 
                               padding: 10px 20px; border-radius: 5px; text-decoration: none; z-index: 100;">
                        Browse Products
                    </a>
                </div>
            </div>
        </li>

        <li class="text-left" style="height: 100vh; position: relative;">
            <div class="video-container" style="position: relative; height: 100%; width: 100%;">
                <video autoplay muted loop style="width: 100%; height: 100%; object-fit: cover;">
                    <source src="{% static 'needs/preview_video.mp4' %}" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
                <div class="video-text" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white;">
                    <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1 class="m-b-20"><strong>Streamline Your Fashion Finds with DesignerMarket.</strong></h1>
                    <p class="m-b-40">Our platform makes it simple to connect with up-and-coming designers and secure pieces that elevate your style. Experience the convenience of discovering fashion that tells a story.</p>
                    <a href="/products" class="btn hvr-hover" 
                        style="margin-top: 20px; color: white; background-color: rgba(0, 0, 0, 0.5); 
                               padding: 10px 20px; border-radius: 5px; text-decoration: none; z-index: 100;">
                        Explore Options
                    </a>
                </div>
            </div>
        </div>
                </div>
            </div>
        </li>
    </ul>

    <div class="slides-navigation" style="position: absolute; top: 50%; width: 100%; transform: translateY(-50%);">
    <a href="#" class="next" style="position: absolute; right: 10px; background: rgba(255, 255, 255, 0.5); padding: 10px; border-radius: 50%; display: flex; align-items: center; justify-content: center; height: 40px; width: 40px;">
        <i class="fas fa-angle-right" aria-hidden="true" style="font-size: 1.5rem; color: black;"></i>
    </a>
    <a href="#" class="prev" style="position: absolute; left: 10px; background: rgba(255, 255, 255, 0.5); padding: 10px; border-radius: 50%; display: flex; align-items: center; justify-content: center; height: 40px; width: 40px;">
        <i class="fas fa-angle-left" aria-hidden="true" style="font-size: 1.5rem; color: black;"></i>
    </a>
</div>
</div>

<div class="mt-2">
    <div class="shadow p-2 rounded" style="background-color:#e9ecef; color:black">
        <div class="container">
            <div class="row text-center font-weight-bold">
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <p><a href="/products">All products</a></p>
                </div>
                {% for category in categories %}
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <p><a href="/products/?category={{category.id}}">{{category.category_name}}</a></p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<div class="products-box" style="padding:30px 0px;">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="title-all text-center">
                    <h1>Recommended products</h1>
                    <p></p>
                </div>
            </div>
        </div>
        <div class="row-card">
    {% for product in products %}
    <div class="col-lg-3 col-md-6 special-grid">
        <div class="products-single fix p-2 bg-white rounded custom-card">
            <div class="box-img-hover">
                <img src="{{ product.product_img.url }}" class="img-fluid main-img" alt="Image">
            </div>
            <div class="additional-images">
                <img src="{{ product.product_img2.url }}" class="img-fluid additional-img" alt="Additional Image 1">
                <img src="{{ product.product_img1.url }}" class="img-fluid additional-img" alt="Additional Image 2">
            </div>
            <div class="product-info font-weight-bold text-left">
                <h4><a href="/productdetail/{{ product.id }}"> <b>{{ product.product_name }}</b></a></h4>
                <h3><b>{{ product.price|intcomma }} ₸</b></h3>
                <p>
                    <strong>Gender:</strong> {{ product.gender }} <br>
                    <strong>Category:</strong> {{ product.category }} <br>
                    <strong>Sizes Available:</strong> {{ product.sizes|length }}
                </p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
    </div>
</div>

    </div>
</div>

{% endblock %}